package dfsbfs;

import javafx.util.Pair;

import java.util.LinkedList;

/**
 * 岛屿数量
 */
public class NumIslands_200 {
    public static void main(String[] args) {
        // char[][]   grid = {{'1','1','1','1','1','0','1','1','1','1','1','1','1','1','1','0','1','0','1','1'},{'0','1','1','1','1','1','1','1','1','1','1','1','1','0','1','1','1','1','1','0'},{'1','0','1','1','1','0','0','1','1','0','1','1','1','1','1','1','1','1','1','1'},{'1','1','1','1','0','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1'},{'1','0','0','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1'},{'1','0','1','1','1','1','1','1','0','1','1','1','0','1','1','1','0','1','1','1'},{'0','1','1','1','1','1','1','1','1','1','1','1','0','1','1','0','1','1','1','1'},{'1','1','1','1','1','1','1','1','1','1','1','1','0','1','1','1','1','0','1','1'},{'1','1','1','1','1','1','1','1','1','1','0','1','1','1','1','1','1','1','1','1'},{'1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1'},{'0','1','1','1','1','1','1','1','0','1','1','1','1','1','1','1','1','1','1','1'},{'1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1'},{'1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1'},{'1','1','1','1','1','0','1','1','1','1','1','1','1','0','1','1','1','1','1','1'},{'1','0','1','1','1','1','1','0','1','1','1','0','1','1','1','1','0','1','1','1'},{'1','1','1','1','1','1','1','1','1','1','1','1','0','1','1','1','1','1','1','0'},{'1','1','1','1','1','1','1','1','1','1','1','1','1','0','1','1','1','1','0','0'},{'1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1'},{'1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1'},{'1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1'}};
        char[][] grid = {
                {'1','1','0','0','0'},
                {'1','1','0','0','0'},
                {'0','0','1','0','0'},
                {'0','0','0','1','1'}
        };
        // 当前实现 grid[1][1] 元素存在重复染色问题
        NumIslands_200 bfsSolution = new NumIslands_200();
        System.out.println(bfsSolution.numIslands(grid));
    }

    public int numIslands(char[][] grid) {
        int result = 0;
        for (int i = 0; i < grid.length; i++) {
            for (int j = 0; j < grid[i].length; j++) {
                char seed = grid[i][j];
                System.out.println("访问 " + i + " " + j);
                if (seed == '1') {
                    result++;
                    // 深搜将所有叶子节点全部染色
                    LinkedList<Pair<Integer, Integer>> queue = new LinkedList<>();
                    queue.add(new Pair<>(i, j));
                    while (!queue.isEmpty()) {
                        System.out.println(queue);
                        Pair<Integer, Integer> visit = queue.poll();
                        int row = visit.getKey();
                        int col = visit.getValue();
                        // 进行染色
                        grid[row][col] = '0';
                        System.out.println("染色 " + row + " " + col);
                        // 上
                        if (row - 1 >= 0 && grid[row - 1][col] == '1') {
                            queue.add(new Pair<>(row - 1, col));
                            grid[row][col] = '0';
                        }
                        // 下
                        if (row + 1 < grid.length && grid[row + 1][col] == '1') {
                            queue.add(new Pair<>(row + 1, col));
                        }
                        // 左
                        if (col - 1 >= 0 && grid[row][col - 1] == '1') {
                            queue.add(new Pair<>(row, col - 1));
                        }
                        // 右
                        if (col + 1 < grid[row].length && grid[row][col + 1] == '1') {
                            queue.add(new Pair<>(row, col + 1));
                        }
                    }
                }
            }
        }
        return result;
    }
}
